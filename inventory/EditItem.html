<html>

<head>
	<link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans|Raleway:300,400">
	<link rel="stylesheet" href="../hamburger-menu-styles.css">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3pro.css">
	<style>
		body {
			text-align: center;
		}
	</style>
</head>

<body>
	<div class=app-page>
		<!-- hamburger menu -->
		<div id="menuToggle">
			<input type="checkbox" />

			<span></span>
			<span></span>
			<span></span>

			<ul id="menu">
				<h1 class="head">
					<a href="../home/home.html">
						iFridge
					</a>
				</h1>
				<a href="inventory.html">
					<li>Inventory</li>
				</a>
				<a href="../shopping-list/shopping-list.html">
					<li>Shopping List</li>
				</a>
				<a href="../recipe-finder/recipe-home.html">
					<li>Recipe Finder</li>
				</a>
				<a href="../settings/settings.html">
					<li>Settings</li>
				</a>
			</ul>
		</div>
		<div>
			<h1 class="head">Edit Item</h1>

			<p>Name</p>
			<input id="name">

			<p>Expiration Date</p>
			<input id="edate">

			<form>
				<p>Please select a category:</p>
				<table style="display: flex; justify-content: center; font-family: 'Raleway', sans-serif;">
					<tr>
						<td>
							<input type="radio" id="fresh produce" name="category" value="fresh produce">
							<label for="fresh produce">Fresh Produce</label><br>
						</td>
					</tr>
					<tr>
						<td>
							<input type="radio" id="proteins" name="category" value="proteins">
							<label for="proteins">Proteins</label><br>
						</td>
					</tr>
					<tr>
						<td>
							<input type="radio" id="dairy" name="category" value="dairy">
							<label for="dairy">Dairy</label><br>
						</td>
					</tr>
					<tr>
						<td>
							<input type="radio" id="drinks" name="category" value="drinks">
							<label for="drinks">Drinks</label><br>
						</td>
					</tr>
					<tr>
						<td>
							<input type="radio" id="frozen foods" name="category" value="frozen foods">
							<label for="frozen foods">Frozen Foods</label><br>
						</td>
					</tr>
					<tr>
						<td>
							<input type="radio" id="beauty/medicine" name="category" value="beauty/medicine">
							<label for="beauty/medicine">Beauty/Medicine</label><br>
						</td>
					</tr>
					<tr>
						<td>
							<input type="radio" id="miscellaneous" name="category" value="miscellaneous">
							<label for="miscellaneous">Miscellaneous</label><br>
						</td>
					</tr>
				</table>
			</form>
			
			<br></br>
			</table>

			<table style="display: flex; justify-content: center;">
				<tr>
					<td><button type="button" onclick="myFunction()">Submit</button></td>
					<td><button type="button" onclick="location.href='./inventory.html'">Cancel</button></td>
				</tr>
			</table>

			<div id="debug"></div>

			<script>
				var information = JSON.parse(localStorage.getItem("edit"));
				console.log(information);
				var ID = information["UID"];
				console.log(ID);

				var type, name, edate;
				name = information["item"];
				edate = information["edate"];
				var inventory = JSON.parse(localStorage.getItem("inventory"));
				var x, idx;
				for (x in inventory) {
					for (idx = 0; idx < inventory[x].length; idx++) {
						if (inventory[x][idx]["UID"] == ID) {
							type = x;
						}
					}
				}
				console.log(type);

				document.getElementById("name").placeholder = name;
				document.getElementById("edate").placeholder = edate;
				document.getElementById("type").placeholder = type;

				function myFunction() {

					var newName, newEdate, newType;

					// Get the value of the input fields
					newName = document.getElementById("name").value;
					newEdate = document.getElementById("edate").value;
					newType = document.getElementById("type").value;

					console.log(inventory);
					// Change the original values
					var x, idx;
					for (x in inventory) {
						console.log(inventory[x].length);
						for (idx = 0; idx < inventory[x].length; idx++) {
							if (inventory[x][idx]["UID"] == ID) {
								console.log(inventory[x][idx]);
								if (newName != "") inventory[x][idx]["item"] = newName;
								if (newEdate != "") inventory[x][idx]["edate"] = newEdate;
								if (newType != "" && newType != type) {
									var store = inventory[x][idx];
									inventory[x].splice(idx, 1);
									inventory[newType].push(store);
									type = newType;
								}

								break;

							}
						}
					}
					console.log(inventory);

					localStorage.setItem("inventory", JSON.stringify(inventory));

				}
			</script>
		</div>
	</div>
</body>

</html>