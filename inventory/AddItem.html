<html>

<head>
	<link rel="stylesheet" href="../styles.css">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans|Raleway:300,400">
	<link rel="stylesheet" href="../hamburger-menu-styles.css">
	<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3pro.css">
	<style>
		body {
			text-align: center;
		}

		/* previous button */
		/*
		a {
			text-decoration: none;
			display: inline-block;
			padding: 8px 16px;
		}

		a:hover {
			background-color: #ddd;
			color: black;
		}

		.previous {
			background-color: #f1f1f1;
			color: black;
		}
		*/
	</style>
</head>

<body>
	<div class="app-page">

		<!-- hamburger menu -->
		<div id="menuToggle">
			<input type="checkbox" />

			<span></span>
			<span></span>
			<span></span>

			<ul id="menu" class="burger">
				<h1 class="head">
					<a href="../home/home.html">
						iFridge
					</a>
				</h1>
				<a href="../inventory/inventory.html">
					<li>Inventory</li>
				</a>
				<a href="shopping-list.html">
					<li>Shopping List</li>
				</a>
				<a href="../recipe-finder/recipe-home.html">
					<li>Recipe Finder</li>
				</a>
				<a href="../settings/settings.html">
					<li>Settings</li>
				</a>
			</ul>
		</div>

		<!-- <a href="#" class="previous">&laquo; Previous</a> -->

		<div>
			<h1 class="head">Add Item</h1>

			<p>Name</p>
			<input id="name">

			<p>Expiration Date</p>
			<input id="edate">

			<form>
				<p>Please select a category:</p>
				<table style="display: flex; justify-content: center; font-family: 'Raleway', sans-serif;">
					<tr>
						<td>
							<input type="radio" id="fresh produce" name="category" value="produce">
							<label for="fresh produce">Fresh Produce</label><br>
						</td>
					</tr>
					<tr>
						<td>
							<input type="radio" id="proteins" name="category" value="protein">
							<label for="proteins">Proteins</label><br>
						</td>
					</tr>
					<tr>
						<td>
							<input type="radio" id="dairy" name="category" value="dairy">
							<label for="dairy">Dairy</label><br>
						</td>
					</tr>
					<tr>
						<td>
							<input type="radio" id="drinks" name="category" value="drinks">
							<label for="drinks">Drinks</label><br>
						</td>
					</tr>
					<tr>
						<td>
							<input type="radio" id="frozen foods" name="category" value="frozen">
							<label for="frozen foods">Frozen Foods</label><br>
						</td>
					</tr>
					<tr>
						<td>
							<input type="radio" id="beauty/medicine" name="category" value="beauty">
							<label for="beauty/medicine">Beauty/Medicine</label><br>
						</td>
					</tr>
					<tr>
						<td>
							<input type="radio" id="miscellaneous" name="category" value="miscellaneous">
							<label for="miscellaneous">Miscellaneous</label><br>
						</td>
					</tr>
				</table>
			</form>
			
			<br></br>

			<table style="display: flex; justify-content: center;">
				<tr>
					<td><button type="button" onclick="myFunction()">Submit</button></td>
					<td><button type="button" onclick="location.href='./inventory.html'">Cancel</button></td>
				</tr>
			</table>


			<div id="debug"></div>

			<script>

				var inventory = JSON.parse(localStorage.getItem("inventory"));

				function myFunction() {

					var newName, newEdate, newType;
					const rad = document.querySelectorAll('input[name="category"]');
					for(const r of rad) {
						if(r.checked)
							newType = r.value;
						console.log(typeof(newType));
					}

					// Get the value of the input fields
					newName = document.getElementById("name").value;
					newEdate = document.getElementById("edate").value;

					console.log(inventory);

					if (newName == "" || newEdate == "" || newType == "") {
						window.alert("INVALID INPUT");
					} else {
						var item = {};
						item["item"] = newName;
						item["edate"] = newEdate;
						var newUID = inventory["UID"];
						newUID = Number(newUID) + 1;
						item["UID"] = ("000000" + newUID).slice(-6);
						inventory[newType].push(item);
						inventory["UID"] = item["UID"];
					}
					console.log(inventory);

					localStorage.setItem("inventory", JSON.stringify(inventory));
					alert('Item Added!');

				}
			</script>
		</div>
	</div>
</body>

</html>
